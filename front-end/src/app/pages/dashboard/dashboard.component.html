<div class="dashboard-page">
  <!-- Boas-vindas -->
  <!-- <section class="welcome-section">
    <div class="welcome-text">
      <h1>Bem-vindo(a) de volta, Dr(a). {{ 'usuarioNome' }}!</h1>
      <p>Aqui está um resumo das suas atividades e métricas mais recentes.</p>
    </div>
    <i class="pi pi-chart-line welcome-icon"></i>
  </section> -->

  <!-- Métricas principais -->
  <section class="metrics-section">
    <h2 class="section-title">Visão Geral</h2>
    <div class="metrics-grid">
      @for (metrica of metricas; track metrica.label) {
      <p-card class="metric-card">
        <div class="metric-content">
          <div class="metric-icon" [ngClass]="metrica.color">
            <i [class]="metrica.icon"></i>
          </div>
          <div class="metric-info">
            <span class="metric-label">{{ metrica.label }}</span>
            <span class="metric-value">
              {{ metrica.label === 'Receita Mensal' ? formatarMoeda(metrica.value) : metrica.value }}
              {{ metrica.label === 'Taxa de Ocupação' ? '%' : '' }}
            </span>
            <span class="metric-variation" [ngClass]="metrica.variation >= 0 ? 'positive' : 'negative'">
              <i [class]="metrica.variation >= 0 ? 'pi pi-arrow-up' : 'pi pi-arrow-down'"></i>
              {{ getValorAbsoluto(metrica.variation) }}%
            </span>
          </div>
        </div>
      </p-card>
      }
    </div>
  </section>

  <!-- Acesso rápido -->
  <section class="quick-actions">
    <h2 class="section-title">Acesso Rápido</h2>
    <div class="actions-grid">
      <button pButton icon="pi pi-calendar-plus" label="Agendamentos" routerLink="/agendamentos" class="quick-button agendamentos"></button>
      <button pButton icon="pi pi-user-plus" label="Pacientes" routerLink="/lista-pacientes" class="quick-button pacientes"></button>
    </div>
  </section>

  <!-- Gráficos -->
  <section class="charts-section">
    <h2 class="section-title">Estatísticas e Gráficos</h2>
    <div class="charts-grid">
      <p-card header="Consultas Mensais" class="chart-card">
        <p-chart type="line" [data]="consultasChart" [options]="chartOptions" height="250px"></p-chart>
      </p-card>
      <p-card header="Distribuição por Especialidade" class="chart-card">
        <p-chart type="doughnut" [data]="pacientesChart" [options]="chartOptions" height="250px"></p-chart>
      </p-card>
      <p-card header="Ocupação Semanal" class="chart-card">
        <p-chart type="bar" [data]="ocupacaoChart" [options]="barChartOptions" height="250px"></p-chart>
      </p-card>
    </div>
  </section>

  <!-- Tabelas -->
  <section class="tables-section">
    <h2 class="section-title">Consultas de Hoje</h2>
    <p-card class="table-card">
      <!-- <div class="card-actions">
        <button pButton icon="pi pi-plus" label="Nova Consulta" routerLink="/agendamentos" class="p-button-sm"></button>
      </div> -->
      <p-table [value]="consultasRecentes">
        <ng-template pTemplate="header">
          <tr>
            <th>Paciente</th>
            <th>Horário</th>
            <th>Tipo</th>
            <th>Médico</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-consulta>
          <tr>
            <td>{{ consulta.paciente }}</td>
            <td>{{ consulta.horario }}</td>
            <td>{{ consulta.tipo }}</td>
            <td>{{ consulta.medico }}</td>
            <td><p-tag [value]="consulta.status" [severity]="getSeverity(consulta.status)"></p-tag></td>
            <td>
              <button pButton icon="pi pi-eye" class="p-button-rounded p-button-text p-button-sm"></button>
              <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-sm"></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </section>
</div>
